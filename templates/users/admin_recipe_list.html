{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
  <h2>Gluten-Free Recipes</h2>
  <form method="get" class="d-flex flex-wrap gap-2 align-items-center" style="min-width:250px;">
    <div class="input-group">
      <input type="text" name="q" value="{{ request.GET.q|default:'' }}" class="form-control" placeholder="İsim veya açıklama ara...">
    </div>
    <select name="is_approved" class="form-select" style="min-width:120px;">
      <option value="">Hepsi</option>
      <option value="true" {% if request.GET.is_approved == 'true' %}selected{% endif %}>Onaylı</option>
      <option value="false" {% if request.GET.is_approved == 'false' %}selected{% endif %}>Onaysız</option>
    </select>
    <button class="btn btn-outline-secondary" type="submit">Filtrele</button>
  </form>
  <a href="{% url 'admin_recipe_create' %}" class="btn btn-success">Add New</a>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Date</th>
      <th>Onaylı mı?</th>
      <th>Ekleyen</th>
      <th>İşlemler</th>
    </tr>
  </thead>
  <tbody>
    {% for recipe in recipes %}
    <tr>
      <td>{{ recipe.name }}</td>
      <td>{{ recipe.description|truncatechars:40 }}</td>
      <td>{{ recipe.created_at|date:"Y-m-d H:i" }}</td>
      <td>{% if recipe.is_approved %}Evet{% else %}Hayır{% endif %}</td>
      <td>{% if recipe.added_by %}{{ recipe.added_by }}{% else %}—{% endif %}</td>
      <td>
        <a href="{% url 'admin_recipe_update' recipe.pk %}" class="btn btn-sm btn-primary">Edit</a>
        <a href="{% url 'admin_recipe_delete' recipe.pk %}" class="btn btn-sm btn-danger">Delete</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6">Kayıt bulunamadı.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %} 